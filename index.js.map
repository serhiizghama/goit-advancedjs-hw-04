{"version":3,"file":"index.js","sources":["../src/constants/constants.js","../src/js/pixabay-api.js","../src/js/components/loader.js","../src/js/render-functions.js","../src/js/components/gallery.js","../src/js/components/loadButton.js","../src/js/components/endWarning.js","../src/main.js"],"sourcesContent":["export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.query-form'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n  endWarningText: document.querySelector('.end-warning'),\n};\n\nexport const PX_API_KEY = '46619732-3197f14e6c8435a9c5454ac04';\n\nexport const STORAGE_KEY = 'query';\n\nexport const simpleLightboxOptions = {\n  overlay: true,\n  overlayOpacity: 1,\n  captions: true,\n  captionPosition: 'bottom',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionDelay: 250,\n};","import { PX_API_KEY } from \"../constants/constants.js\";\nimport axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api\";\naxios.defaults.baseURL = BASE_URL;\n\n\nexport async function getPhotos(query, page) {\n    const params = {\n        key: PX_API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page\n    };\n\n    try {\n        const response = await axios.get(\"/\", { params });\n        const { hits, totalHits } = response?.data || {};\n\n        return hits ? { photos: hits, isNext: (15 * page) < totalHits } : {};\n    } catch (error) {\n        console.error(\"Fetch pixabay error: \", error instanceof Error ? error.message : error);\n        return {};\n    }\n}","import { refs } from '../../constants/constants.js';\n\nconst loader = {\n  show() {\n    refs.loader.style.display = 'block';\n  },\n\n  hide() {\n    refs.loader.style.display = 'none';\n  },\n};\n\nexport default loader","export function renderGallery(photos) {\n\n    return photos\n        .map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) =>\n            `\n            <li class=\"gallery-card\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" height=\"312\" width=\"200\" loading=\"lazy\">\n                    <ul class=\"statistics\">\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Likes</p>\n                            <p class=\"stat-value\">${likes}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Views</p>\n                            <p class=\"stat-value\">${views}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Comments</p>\n                            <p class=\"stat-value\">${comments}</p>\n                        </li>\n\n                        <li class=\"stat-element\">\n                            <p class=\"stat-name\">Downloads</p>\n                            <p class=\"stat-value\">${downloads}</p>\n                        </li>\n                    </ul>\n                </a>\n            </li>\n      `,\n        )\n        .join('');\n}","import { refs } from '../../constants/constants.js';\nimport { renderGallery } from '../render-functions.js';\n\n\nconst gallery = {\n\n  show(photos) {\n    refs.gallery.innerHTML = renderGallery(photos);\n  },\n\n  addNewPhotos(photos) {\n    const newPhotosHTML = renderGallery(photos);\n    refs.gallery.innerHTML = refs.gallery.innerHTML + newPhotosHTML;\n  },\n\n  clear() {\n    refs.gallery.innerHTML = '';\n  },\n};\n\nexport default gallery;","import { refs } from '../../constants/constants.js';\nimport { handleLoadMore } from '../../main.js';\n\nconst loadButton = {\n  show() {\n    refs.loadBtn.style.display = 'block';\n    refs.loadBtn.addEventListener('click', handleLoadMore);\n  },\n\n  hide() {\n    refs.loadBtn.removeEventListener('click', handleLoadMore);\n    refs.loadBtn.style.display = 'none';\n  },\n};\n\nexport default loadButton;","import { refs } from '../../constants/constants.js';\n\nconst endWarning = {\n  show() {\n    refs.endWarningText.style.display = 'block';\n  },\n\n  hide() {\n    refs.endWarningText.style.display = 'none';\n  },\n};\n\nexport default endWarning;","import { refs, simpleLightboxOptions, STORAGE_KEY } from \"./constants/constants.js\";\r\nimport { getPhotos } from \"./js/pixabay-api.js\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\nimport iziToast from \"izitoast\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport loader from \"./js/components/loader.js\";\r\nimport gallery from \"./js/components/gallery.js\";\r\nimport loadButton from \"./js/components/loadButton.js\";\r\nimport endWarning from \"./js/components/endWarning.js\";\r\n\r\nlet query = fillFormFields(refs.form);\r\nlet page = 1;\r\n\r\nrefs.form.addEventListener(\"input\", handleFormInput);\r\nrefs.form.addEventListener(\"submit\", handleSearch);\r\n\r\nconst simpleLightBox = new SimpleLightbox(\".gallery li a\", simpleLightboxOptions);\r\n\r\n\r\nfunction handleFormInput(e) {\r\n    query = e.target.value.trim();\r\n    localStorage.setItem(STORAGE_KEY, query);\r\n}\r\n\r\n\r\nasync function handleSearch(e) {\r\n    e.preventDefault();\r\n    if (!query) return;\r\n\r\n    page = 1;\r\n    loadButton.hide();\r\n    endWarning.hide();\r\n    gallery.clear();\r\n    loader.show();\r\n\r\n    const { photos, isNext } = await fetchPictures();\r\n\r\n    if (photos?.length) {\r\n        gallery.show(photos);\r\n        isNext && loadButton.show();\r\n\r\n        simpleLightBox.refresh();\r\n        localStorage.removeItem(STORAGE_KEY);\r\n\r\n        refs.form.reset();\r\n        page += 1;\r\n    }\r\n\r\n    loader.hide();\r\n}\r\n\r\n\r\nexport async function handleLoadMore() {\r\n    loader.show();\r\n    loadButton.hide();\r\n    endWarning.hide();\r\n\r\n    const { photos, isNext } = await fetchPictures();\r\n    if (photos?.length === 0) {\r\n        endWarning.show();\r\n    }\r\n    else if (photos?.length) {\r\n        gallery.addNewPhotos(photos);\r\n        smoothScroll();\r\n        isNext ? loadButton.show() : endWarning.show();\r\n        simpleLightBox.refresh();\r\n        page += 1;\r\n    }\r\n\r\n    loader.hide();\r\n}\r\n\r\n\r\nasync function fetchPictures() {\r\n    const data = await getPhotos(query, page);\r\n\r\n    const { photos } = data;\r\n\r\n    if (!photos) {\r\n        iziToast.error({ message: \"Sorry, there was an error while getting photos. Please try again!\", position: \"topRight\" });\r\n        return;\r\n    }\r\n    else if (photos.length === 0) {\r\n        console.log(\"==== 0 ==> \", 0);\r\n        iziToast.warning({ message: \"Sorry, there are no images matching your search query. Please try again!\", position: \"topRight\" });\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\n\r\nfunction fillFormFields(form) {\r\n    const localStorageData = localStorage.getItem(STORAGE_KEY);\r\n    if (!localStorageData) return;\r\n\r\n    form.elements.query.value = localStorageData;\r\n    return localStorageData || \"\";\r\n}\r\n\r\n\r\nfunction smoothScroll() {\r\n    const card = document.querySelector(\".gallery-card\");\r\n    const height = card.getBoundingClientRect().height + 32;\r\n\r\n    window.scrollBy({\r\n        top: height * 2,\r\n        left: 0,\r\n        behavior: \"smooth\"\r\n    });\r\n}"],"names":["refs","PX_API_KEY","STORAGE_KEY","simpleLightboxOptions","BASE_URL","axios","getPhotos","query","page","params","response","hits","totalHits","error","loader","renderGallery","photos","webformatURL","tags","likes","views","comments","downloads","largeImageURL","gallery","newPhotosHTML","loadButton","handleLoadMore","endWarning","fillFormFields","handleFormInput","handleSearch","simpleLightBox","SimpleLightbox","isNext","fetchPictures","smoothScroll","data","iziToast","form","localStorageData","height"],"mappings":"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"}